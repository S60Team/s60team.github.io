function StoreImageInIDB(e,t){
var n,r="MozAppearance"in document.documentElement.style==!0||"mozInnerScreenX"in window,o=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.OIndexedDB||window.msIndexedDB,i=window.IDBTransaction||window.webkitIDBTransaction||window.OIDBTransaction||window.msIDBTransaction,c=window.URL||window.webkitURL,s=o.open("s60teamFiles",1),a=function(){
var t,n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.addEventListener("load",function(){200===n.status&&(t=n.response,u(t))},!1),n.send()},d=function(e){if(-1==e.indexOf(";base64,")){
var t=(r=e.split(","))[0].split(":")[1],n=r[1];return new Blob([n],{type:t})}t=(r=e.split(";base64,"))[0].split(":")[1];for(var r,o=(n=window.atob(r[1])).length,i=new Uint8Array(o),c=0;c<o;++c)i[c]=n.charCodeAt(c);return new Blob([i],{
type:t})},u=function(e){function o(e){var o=n.transaction(["pictures"],i.READ_WRITE?i.READ_WRITE:"readwrite");try{o.objectStore("pictures").put(e,t);o.objectStore("pictures").get(t).onsuccess=function(e){var n=e.target.result
;!1===r&&(n=d(n));var o=(window.URL||window.webkitURL).createObjectURL(n);document.getElementById(t).setAttribute("src",o)}}catch(e){}}!0===r?o(e):function(e,t){var n=new FileReader;n.onload=function(e){t(e.target.result)},
n.readAsDataURL(e)}(e,o)};s.onerror=function(e){},s.onsuccess=function(e){(n=s.result).onerror=function(e){};var o=n.transaction(["pictures"],"readwrite");o.objectStore("pictures").get(t).onsuccess=function(e){try{var n=e.target.result
;if(!1===r)if(void 0!==n){document.getElementById(t).setAttribute("src",n)}else{var o=c.createObjectURL(n);document.getElementById(t).setAttribute("src",o)}else{var i=c.createObjectURL(n);document.getElementById(t).setAttribute("src",i)}
}catch(e){a()}},o.objectStore("pictures").get(t).onerror=function(e){a()}},s.onupgradeneeded=function(e){e.target.result.createObjectStore("pictures")}}