function StoreImageInIDB(e,t){let n,r="MozAppearance"in document.documentElement.style==!0||"mozInnerScreenX"in window,o=window.indexedDB,c=window.URL||window.webkitURL,i=o.open("s60teamFiles",1),u=function(){
fetch(e).then((e=>e.blob())).then((e=>s(e)))},s=function(e){function o(e){let o=n.transaction(["pictures"],"readwrite");try{o.objectStore("pictures").put(e,t);o.objectStore("pictures").get(t).onsuccess=function(e){let n=e.target.result
;!1===r&&(n=function(e){let t=";base64,";if(-1==e.indexOf(t)){let t=e.split(","),n=t[0].split(":")[1],r=t[1];return new Blob([r],{type:n})}let n=e.split(t),r=n[0].split(":")[1],o=window.atob(n[1]),c=o.length,i=new Uint8Array(c)
;for(let e=0;e<c;++e)i[e]=o.charCodeAt(e);return new Blob([i],{type:r})}(n));let o=(window.URL||window.webkitURL).createObjectURL(n);document.getElementById(t).setAttribute("src",o)}}catch(e){}}!0===r?o(e):function(e,t){let n=new FileReader
;n.onload=function(e){t(e.target.result)},n.readAsDataURL(e)}(e,o)};i.onerror=function(e){},i.onsuccess=function(e){n=i.result,n.onerror=function(e){};let o=n.transaction(["pictures"],"readwrite")
;o.objectStore("pictures").get(t).onsuccess=function(e){try{let n=e.target.result;if(!1===r)if(void 0!==n){document.getElementById(t).setAttribute("src",n)}else{let e=c.createObjectURL(n);document.getElementById(t).setAttribute("src",e)
}else{let e=c.createObjectURL(n);document.getElementById(t).setAttribute("src",e)}}catch(e){u()}},o.objectStore("pictures").get(t).onerror=function(e){u()}},i.onupgradeneeded=function(e){e.target.result.createObjectStore("pictures")}}