function StoreImageInIDB(e,t){var n,r="MozAppearance"in document.documentElement.style==!0||"mozInnerScreenX"in window,o=window.indexedDB,c=window.URL||window.webkitURL,i=o.open("s60teamFiles",1),s=function(){
fetch(e).then(e=>e.blob()).then(e=>a(e))},u=function(e){if(-1==e.indexOf(";base64,")){var t=(r=e.split(","))[0].split(":")[1],n=r[1];return new Blob([n],{type:t})}t=(r=e.split(";base64,"))[0].split(":")[1]
;for(var r,o=(n=window.atob(r[1])).length,c=new Uint8Array(o),i=0;i<o;++i)c[i]=n.charCodeAt(i);return new Blob([c],{type:t})},a=function(e){function o(e){var o=n.transaction(["pictures"],"readwrite");try{o.objectStore("pictures").put(e,t)
;o.objectStore("pictures").get(t).onsuccess=function(e){var n=e.target.result;!1===r&&(n=u(n));var o=(window.URL||window.webkitURL).createObjectURL(n);document.getElementById(t).setAttribute("src",o)}}catch(e){}}!0===r?o(e):function(e,t){
var n=new FileReader;n.onload=function(e){t(e.target.result)},n.readAsDataURL(e)}(e,o)};i.onerror=function(e){},i.onsuccess=function(e){(n=i.result).onerror=function(e){};var o=n.transaction(["pictures"],"readwrite")
;o.objectStore("pictures").get(t).onsuccess=function(e){try{var n=e.target.result;if(!1===r)if(void 0!==n){document.getElementById(t).setAttribute("src",n)}else{var o=c.createObjectURL(n);document.getElementById(t).setAttribute("src",o)
}else{o=c.createObjectURL(n);document.getElementById(t).setAttribute("src",o)}}catch(e){s()}},o.objectStore("pictures").get(t).onerror=function(e){s()}},i.onupgradeneeded=function(e){e.target.result.createObjectStore("pictures")}}